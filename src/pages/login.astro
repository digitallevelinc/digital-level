---
import Base from '../layouts/Base.astro';

// Lógica de procesamiento del formulario
if (Astro.request.method === "POST") {
  try {
    const data = await Astro.request.formData();
    const user = data.get("user");
    const pass = data.get("password");

    // Validación temporal (luego el dev de Brasil conectará su DB)
    if (user === "admin" && pass === "digital2026") {
      // Establecemos una cookie de sesión por 24 horas
      Astro.cookies.set("session_token", "secure_digital_level_token", { 
        path: "/", 
        httpOnly: true, 
        maxAge: 60 * 60 * 24 
      });
      return Astro.redirect("/dashboard");
    }
  } catch (error) {
    console.error("Error en login:", error);
  }
}
---

<Base title="Acceso Operadores">
  <div class="flex items-center justify-center min-h-[70vh] px-6">
    <div class="w-full max-w-md bg-[#161a1e] border border-gray-800 p-8 rounded-2xl shadow-2xl">
      <div class="text-center mb-8">
        <img src="/img/logo.png" alt="Logo" class="w-12 h-12 mx-auto mb-4" />
        <h2 class="text-2xl font-bold text-white">Panel de Operadores</h2>
        <p class="text-gray-400 text-sm mt-2">Ingresa tus credenciales para continuar</p>
      </div>

      <form method="POST" class="space-y-6">
        <div>
          <label class="block text-xs font-bold uppercase text-[#F3BA2F] mb-2">Usuario</label>
          <input 
            type="text" 
            name="user" 
            required 
            class="w-full bg-[#0b0e11] border border-gray-700 rounded-xl p-3 text-white focus:border-[#F3BA2F] transition-colors outline-none"
          />
        </div>
        <div>
          <label class="block text-xs font-bold uppercase text-[#F3BA2F] mb-2">Contraseña</label>
          <input 
            type="password" 
            name="password" 
            required 
            class="w-full bg-[#0b0e11] border border-gray-700 rounded-xl p-3 text-white focus:border-[#F3BA2F] transition-colors outline-none"
          />
        </div>
        <button 
          type="submit" 
          class="w-full bg-[#F3BA2F] hover:bg-[#d9a528] text-black font-bold py-3 rounded-xl transition-all transform hover:scale-[1.02]"
        >
          Iniciar Sesión
        </button>
      </form>
    </div>
  </div>
</Base>