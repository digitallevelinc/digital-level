---
// src/components/Features.astro
const services = [
  {
    id: "ganancias",
    title: "Ganancias en vivo",
    description: "Tu radar de Arbitraje P2P en vivo. Accede al flujo directo de lo que hacen tus Makers en Binance. Recibe alertas instantáneas en Telegram/Discord Captura cada orden de compra/venta directamente desde la cuenta de Binance del operador apenas ocurre.",
    icon: "fa-eye",
    waMsg: "Hola! Quiero configurar las ganancias en vivo",
    hasPreview: true
  },
  {
    id: "sincronizacion",
    title: "Sincronizacion En Google Sheets",
    description: "Olvida la intervención manual. Logra registros automáticos del P2P USDT/FIAT, Binance Pay, Transfers y mas en tiempo real. Mantén el control absoluto de tu arbitraje sin errores.",
    icon: "fa-sync-alt",
    waMsg: "Hola! Me interesa la Sincronización en Spreadsheets para mi registro de operaciones.",
    hasPreview: true 
  },
  {
    id: "seguridad",
    title: "Seguridad Blindada",
    description: "Protección de nivel bancario para tu capital. Protocolos de acceso restringido y auditorías de integridad permanentes al operador, permitiéndote delegar tu operativa sin exponerte nunca a fugas de capital, credenciales o llaves 2FA.",
    icon: "fa-shield-alt",
    waMsg: "Hola! Solicito información sobre los protocolos de Seguridad y auditoría.",
    hasPreview: true
  },
  {
    id: "insights",
    title: "Insights Reales",
    description: "Toma decisiones como comerciante p2p basadas en datos, no en suposiciones. Visualiza tu rentabilidad del P2P neta con gráficos profesionales para un control total de tu spread, ROI y Arbitraje en tiempo real.",
    icon: "fa-chart-pie",
    waMsg: "Hola! Me gustaría ver cómo funcionan los Insights Reales y la exportación a Sheets.",
    hasPreview: true
  },
  {
    id: "gestion",
    title: "Gestión de Operadores",
    description: "Escala tu negocio delegando con confianza. Control absoluto sobre tu equipo de trabajo, protegiendo tus credenciales y monitoreando cada movimiento.",
    icon: "fa-users-cog",
    waMsg: "Hola! Tengo un equipo de operadores y quiero usar su sistema de Gestión.",
    hasPreview: true
  },
  {
    id: "curso-p2p",
    title: "Maestría en Binance P2P",
    description: "Domina el P2P de pies a cabeza. Aprende a gestionar tus propios Makers, maximizar spreads de arbitraje y operar con seguridad total sin arriesgar tu capital.",
    icon: "fa-graduation-cap", // Cambié el icono a uno de graduación/educación
    waMsg: "¡Hola! Me interesa el curso de Binance P2P para profesionalizar mi operativa.",
    hasPreview: true
}
];

const waNumber = "584120000000"; 
---

<section id="features" class="py-24 bg-[#0b0e11] relative" x-data="{ openPreview: null }">
    <div class="max-w-7xl mx-auto px-6">
        <div class="text-center mb-16">
            <h2 class="text-4xl md:text-5xl font-black text-white mb-4 uppercase">
                Nuestras <span class="text-[#F3BA2F]">Soluciones</span>
            </h2>
            <p class="text-gray-400 max-w-2xl mx-auto text-lg">
                Optimizamos tu <strong>estrategia de arbitraje</strong> con soluciones integrales para el <strong>comerciante P2P</strong>. Automatiza tu operativa para escalar tus ganancias en Binance.
            </p>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
            {services.map(service => (
                <div class="bg-[#1e2329] p-8 rounded-2xl border border-gray-800 hover:border-[#F3BA2F]/50 transition-all group flex flex-col h-full relative overflow-hidden">
                    <div class="w-14 h-14 bg-[#F3BA2F]/10 rounded-lg flex items-center justify-center mb-6 group-hover:bg-[#F3BA2F] transition-colors">
                        <i class={`fas ${service.icon} text-2xl text-[#F3BA2F] group-hover:text-black`}></i>
                    </div>
                    
                    <h3 class="text-xl font-bold text-white mb-3 uppercase tracking-tighter">{service.title}</h3>
                    
                    <p class="text-gray-400 leading-relaxed text-sm mb-6 flex-grow">
                        {service.description}
                    </p>

                    {service.hasPreview && (
                        <div class="mb-6">
                            <button 
                                @click={`openPreview === '${service.id}' ? openPreview = null : openPreview = '${service.id}'`}
                                class="text-[#F3BA2F] text-xs font-bold uppercase tracking-widest flex items-center gap-2 hover:underline"
                            >
                                <span x-text={`openPreview === '${service.id}' ? 'Ocultar Detalle' : 'Ver Prueba Visual'`}></span>
                                <i class="fas fa-chevron-down transition-transform" :class={`openPreview === '${service.id}' ? 'rotate-180' : ''`}></i>
                            </button>

                            <div 
                                x-show={`openPreview === '${service.id}'`} 
                                x-collapse
                                class="mt-4 space-y-4 bg-black/30 p-4 rounded-xl border border-white/5"
                            >
                                {service.id === 'sincronizacion' && (
                                    <div class="space-y-2">
                                        <span class="text-[10px] text-[#F3BA2F] font-bold uppercase">Sincroniza en google sheets</span>
                                        <img src="/img/sheets.png" alt="Bot P2P" class="rounded border border-gray-700 w-full" />
                                    </div>
                                )}

                                {service.id === 'seguridad' && (
                                    <div class="space-y-2">
                                        <span class="text-[10px] text-[#F3BA2F] font-bold uppercase">Auditoría Operativa</span>
                                        <img src="/img/audit.png" alt="Auditoria de Seguridad" class="rounded border border-gray-700 w-full" />
                                    </div>
                                )}

                                {service.id === 'insights' && (
                                    <div class="space-y-2">
                                        <span class="text-[10px] text-[#F3BA2F] font-bold uppercase">Métricas de Rentabilidad</span>
                                        <img src="/img/insights.png" alt="Gráficos de rendimiento" class="rounded border border-gray-700 w-full" />
                                    </div>
                                )}

                                {service.id === 'ganancias' && (
                                    <div class="space-y-2">
                                        <span class="text-[10px] text-[#F3BA2F] font-bold uppercase">Monitoreo P2P</span>
                                        <video 
                                            src="/img/monitoreo.mp4" 
                                            autoplay 
                                            loop 
                                            muted 
                                            playsinline 
                                            class="rounded border border-gray-700 w-full shadow-lg"
                                        >
                                            Tu navegador no soporta videos.
                                        </video>
                                    </div>
                                )}

                                {service.id === 'gestion' && (
                                    <div class="space-y-2">
                                        <span class="text-[10px] text-[#F3BA2F] font-bold uppercase">Panel de Operadores</span>
                                        <img src="/img/gestion.png" alt="Gestión de equipo" class="rounded border border-gray-700 w-full" />
                                    </div>
                                )}

                                {service.id === 'curso-p2p' && (
                                    <div class="space-y-2">
                                        <span class="text-[10px] text-[#F3BA2F] font-bold uppercase">Curso P2P</span>
                                        <img src="/img/curso.png" alt="Tracker P2P" class="rounded border border-gray-700 w-full" />
                                    </div>
                                )}
                            </div>
                        </div>
                    )}
                    
                    <a 
                        href={`https://wa.me/${waNumber}?text=${encodeURIComponent(service.waMsg)}`}
                        target="_blank"
                        class="w-full py-3 px-4 bg-transparent border border-[#F3BA2F] text-[#F3BA2F] rounded-xl font-bold text-sm hover:bg-[#F3BA2F] hover:text-black transition-all text-center flex items-center justify-center gap-2 group-hover:shadow-[0_0_15px_rgba(243,186,47,0.2)]"
                    >
                        CONSULTAR {service.title}
                        <i class="fab fa-whatsapp"></i>
                    </a>
                </div>
            ))}
        </div>
    </div>
</section>