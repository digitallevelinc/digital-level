---
// src/components/dashboard/ciclos.astro
---
<div class="bg-[#161a1e] border border-gray-800 rounded-2xl p-5 shadow-lg transition-all hover:border-emerald-500/30 group">
    <div class="flex justify-between items-start mb-6">
        <div>
            <p class="text-[9px] text-gray-500 font-black uppercase tracking-[0.2em]">Ganancia Promedio / Ciclo</p>
            <div class="flex items-baseline gap-2 mt-1">
                <h3 id="kpi-cycle-value" class="text-3xl font-bold text-emerald-400 tracking-tighter">≈ $0.00</h3>
                <span class="flex items-center gap-1.5 mb-1">
                    <span class="w-2 h-2 rounded-full bg-emerald-500 animate-pulse shadow-[0_0_8px_rgba(16,185,129,0.5)]"></span>
                    <span class="text-[8px] text-emerald-500/70 font-black uppercase italic tracking-tighter">Live Monitor</span>
                </span>
            </div>
        </div>
        <div class="bg-emerald-500/10 p-2.5 rounded-xl group-hover:bg-emerald-500/20 transition-colors border border-emerald-500/10">
            <i class="fas fa-sync-alt text-emerald-500 text-[10px] animate-spin-slow"></i>
        </div>
    </div>

    <div class="grid grid-cols-2 gap-4 mb-6">
        <div class="bg-black/30 p-3 rounded-2xl border border-white/[0.03] shadow-inner">
            <span class="text-[8px] text-gray-500 uppercase font-black tracking-widest mb-1.5 block opacity-70">Ciclos Totales</span>
            <div class="flex items-baseline gap-1">
                <span id="cycle-count" class="text-xl font-mono font-bold text-white tracking-tighter leading-none">00</span>
                <span class="text-[8px] text-gray-600 font-black uppercase italic">Vueltas</span>
            </div>
        </div>
        <div class="bg-black/30 p-3 rounded-2xl border border-white/[0.03] shadow-inner">
            <span class="text-[8px] text-gray-500 uppercase font-black tracking-widest mb-1.5 block opacity-70">Bancos Activos</span>
            <div class="flex items-baseline gap-1">
                <span id="active-banks-count" class="text-xl font-mono font-bold text-[#F3BA2F] tracking-tighter leading-none">00</span>
                <span class="text-[8px] text-[#F3BA2F]/40 font-black uppercase italic">Online</span>
            </div>
        </div>
    </div>

    <div class="space-y-4">
        <div class="flex justify-between items-center border-b border-white/5 pb-2.5 sticky top-0 bg-[#161a1e] z-10">
            <p class="text-[9px] text-gray-400 font-black uppercase tracking-[0.1em]">Desglose Operativo</p>
            <div class="px-2 py-0.5 rounded-md bg-emerald-500/5">
                <p class="text-[7px] text-emerald-500/60 uppercase font-black tracking-tighter italic">Neto Acumulado</p>
            </div>
        </div>
        
        <div id="cycle-banks-insights" class="space-y-1 max-h-[380px] overflow-y-auto pr-1.5 custom-scrollbar">
            <div class="py-10 text-center opacity-20">
                <i class="fas fa-circle-notch animate-spin text-xl mb-2"></i>
                <p class="text-[8px] uppercase font-black tracking-widest">Sincronizando Ciclos...</p>
            </div>
        </div>
    </div>
</div>

<style>
    /* Animación suave para el icono de refresco */
    .animate-spin-slow { 
        animation: spin 8s linear infinite; 
    }
    
    @keyframes spin { 
        from { transform: rotate(0deg); } 
        to { transform: rotate(360deg); } 
    }

    /* Scrollbar minimalista para no romper la estética */
    .custom-scrollbar::-webkit-scrollbar {
        width: 3px;
    }
    .custom-scrollbar::-webkit-scrollbar-track {
        background: transparent;
    }
    .custom-scrollbar::-webkit-scrollbar-thumb {
        background: rgba(255, 255, 255, 0.05);
        border-radius: 10px;
    }
    .custom-scrollbar::-webkit-scrollbar-thumb:hover {
        background: rgba(16, 185, 129, 0.2);
    }
</style>